Testing & TDD – מדריך למפתחים מתחילים

מטרת מסמך זה היא להציג עקרונות עבודה נכונים עם בדיקות אוטומטיות ו־פיתוח מונחה בדיקות (TDD), בצורה פשוטה, מעשית והדרגתית.

למה בכלל בדיקות?

בדיקות אוטומטיות עוזרות לנו:

לוודא שהקוד עובד כמו שציפינו

למנוע שבירת קוד קיים כשמוסיפים פיצ’רים

לשפר את עיצוב הקוד

לעבוד בביטחון גם במערכות גדולות

קוד בלי בדיקות = קוד שפוחד לגעת בו

מה זה TDD?

TDD – Test Driven Development
שיטת פיתוח שבה כותבים בדיקה לפני שכותבים את הקוד עצמו.

מחזור העבודה (הבסיס של TDD)

Red – כותבים בדיקה שנכשלת

Green – כותבים קוד מינימלי שגורם לבדיקה לעבור

Refactor – משפרים את הקוד בלי לשנות התנהגות

חוזרים על המחזור שוב ושוב, בצעדים קטנים.

איך נראית בדיקה טובה?
מבנה מומלץ: Arrange – Act – Assert
Arrange – הכנת נתונים ותלויות
Act     – הרצת הקוד הנבדק
Assert  – בדיקה שהתוצאה נכונה

עקרונות חשובים

בדיקה אחת = התנהגות אחת

הבדיקה צריכה להיות ברורה לקריאה

שם הבדיקה צריך להסביר מה אמור לקרות

דוגמה לשם טוב:

Should_Return_Error_When_User_Not_Found

Unit Tests – בדיקות יחידה
מה זה?

בדיקות של פונקציה / מחלקה אחת, בלי תלות חיצונית.

מאפיינים

רצות מהר מאוד

לא ניגשות ל־DB, קבצים או רשת

קלות לתחזוקה

כללים למתחילים

בודקים לוגיקה, לא Framework

משתמשים ב־Mock רק כשיש תלות חיצונית

לא בודקים מימוש פנימי – רק תוצאה

Integration Tests – בדיקות אינטגרציה
מה זה?

בדיקות שבודקות חיבור בין רכיבים:

API + DB

Service + Repository

קוד מול תשתית

חשוב לדעת

יש פחות בדיקות כאלה מ־Unit Tests

הן איטיות יותר

בודקים רק תרחישים חשובים

פירמידת הבדיקות
        End to End (מעט מאוד)
     Integration Tests
  Unit Tests (הרוב)


המטרה:
הרבה בדיקות קטנות ומהירות, מעט בדיקות כבדות.

עקרונות עיצוב שעוזרים לבדיקה

Dependency Injection – לא ליצור תלויות בתוך המחלקה

עבודה מול Interfaces

מחלקה אחת = אחריות אחת

אם קשה לבדוק קוד – כנראה שהעיצוב לא טוב

טעויות נפוצות של מתחילים

- כתיבת בדיקות רק בשביל Coverage
- בדיקות שתלויות אחת בשנייה
- בדיקות ארוכות ומסובכות
- בדיקת לוגים במקום בדיקת תוצאה

מתי כן חייבים בדיקה?

כתבו בדיקה כאשר:

יש לוגיקה עסקית

יש תנאים / חישובים

יש סיכוי לשינויים עתידיים

תקלה כאן תהיה יקרה

טיפ חשוב לסיום

בדיקות הן לא תוספת –
בדיקות הן חלק מהקוד.

מפתח טוב:

כותב קוד שעובד

מפתח מקצועי כותב קוד שעובד וגם נבדק
